-- Drop the database if it exists
DROP DATABASE IF EXISTS `online_shop_plus`;
-- Create the database if it does not exist
CREATE DATABASE IF NOT EXISTS `online_shop_plus`;
-- Use the database
USE `online_shop_plus`;

-- Create the sys_role table
DROP TABLE IF EXISTS sys_role;
CREATE TABLE `sys_role`
(
    `id`          BIGINT NOT NULL AUTO_INCREMENT COMMENT '角色id',
    `role_name`   VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL COMMENT '角色名',
    `role_code`   VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL COMMENT '角色编码',
    `description` VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL COMMENT '描述',
    `status`      INT                                                           DEFAULT NULL COMMENT '状态',
    `create_time` TIMESTAMP                                                     DEFAULT NULL COMMENT '创建时间',
    `update_time` TIMESTAMP                                                     DEFAULT NULL COMMENT '更新时间',
    `is_deleted`  TINYINT                                                       DEFAULT NULL COMMENT '是否删除', # 0 未删除 1 已删除
    PRIMARY KEY (`id`)
) ENGINE = InnoDB
  AUTO_INCREMENT = 1
  CHARACTER SET = utf8mb4
  COLLATE = utf8mb4_0900_ai_ci COMMENT = '角色表'
  ROW_FORMAT = Dynamic;
-- Insert data into the sys_role table
INSERT INTO `sys_role` (id, role_name, role_code, description, status, create_time, update_time, is_deleted)
VALUES (1, '管理员', '001', 'admin', 1, '2020-12-20 16:00:00', '2020-12-20 16:00:00', 0),
       (2, '普通用户', '002', 'user', 1, '2020-12-20 16:00:00', '2020-12-20 16:00:00', 0);


-- Create the sys_user table
DROP TABLE IF EXISTS sys_user;
CREATE TABLE `sys_user`
(
    `id`          BIGINT NOT NULL AUTO_INCREMENT COMMENT '用户id',
    `avatar`      VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL COMMENT '头像',
    `username`    VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL COMMENT '用户名',
    `password`    VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '123456' COMMENT '密码',
    `real_name`   VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL COMMENT '真实姓名',
    `email`       VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL COMMENT '邮箱',
    `address`     VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL COMMENT '地址',
    `phone`       VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL COMMENT '电话',
    `description` VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT '' COMMENT '描述',
    `status`      INT                                                           DEFAULT NULL COMMENT '状态',-- 0 启用 1 禁用
    `wallet`      DECIMAL(10, 2)                                                DEFAULT 0.00 COMMENT '钱包',
    `create_time` TIMESTAMP                                                     DEFAULT NULL,
    `update_time` TIMESTAMP                                                     DEFAULT NULL,
    `is_deleted`  TINYINT                                                       DEFAULT NULL,
    PRIMARY KEY (`id`)
) ENGINE = InnoDB
  AUTO_INCREMENT = 1
  CHARACTER SET = utf8mb4
  COLLATE = utf8mb4_0900_ai_ci COMMENT = '用户表'
  ROW_FORMAT = Dynamic;

-- Insert data into the sys_user table
INSERT INTO `sys_user` (id, avatar, username, password, real_name, email, address, phone, description, status, wallet,
                        create_time, update_time, is_deleted)
VALUES (1, NULL, 'admin', '123456', 'admin', '123@gmail.com', Null, Null, NULL, 0, 0.00, CURRENT_TIMESTAMP(),
        CURRENT_TIMESTAMP(), 0),
       (2, NULL, 'purexua', '123456', 'purexua', '123@gmail.com', NULL, NULL, NULL, 0, 999.00, CURRENT_TIMESTAMP(),
        CURRENT_TIMESTAMP(), 0);

-- Create the sys_user_role table
DROP TABLE IF EXISTS sys_user_role;
CREATE TABLE `sys_user_role`
(
    `id`      BIGINT NOT NULL AUTO_INCREMENT COMMENT '角色用户id',
    `role_id` BIGINT DEFAULT NULL COMMENT '角色id',
    `user_id` BIGINT DEFAULT NULL COMMENT '用户id',
    PRIMARY KEY (`id`),
    FOREIGN KEY (`role_id`) REFERENCES `sys_role` (`id`),
    FOREIGN KEY (`user_id`) REFERENCES `sys_user` (`id`)
) ENGINE = InnoDB
  AUTO_INCREMENT = 1
  CHARACTER SET = utf8mb4
  COLLATE = utf8mb4_0900_ai_ci COMMENT = '角色用户表'
  ROW_FORMAT = Dynamic;


-- Insert data into the sys_user_role table
INSERT INTO `sys_user_role` (id, role_id, user_id)
VALUES (1, 1, 1),
       (2, 2, 2);